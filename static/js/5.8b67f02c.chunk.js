(this["webpackJsonpway-of-samurai-ts"]=this["webpackJsonpway-of-samurai-ts"]||[]).push([[5],{234:function(e,a,s){"use strict";s.d(a,"b",(function(){return u})),s.d(a,"a",(function(){return d})),s.d(a,"c",(function(){return m}));var t=s(236),n=s(0),r=s.n(n),o=s(235),i=s.n(o),l=s(117),c=function(e){var a=e.meta,s=a.touched,t=a.error,n=e.children,o=s&&t;return r.a.createElement("div",{className:"".concat(i.a.formControl," ").concat(o?i.a.error:"")},n,o&&r.a.createElement("div",{className:i.a.messageError},t))},u=function(e){var a=e.input,s=(e.meta,Object(t.a)(e,["input","meta"]));return r.a.createElement(c,e,r.a.createElement("textarea",Object.assign({},a,s)))},d=function(e){var a=e.input,s=(e.meta,Object(t.a)(e,["input","meta"]));return r.a.createElement(c,e,r.a.createElement("input",Object.assign({},a,s)))};function m(e,a,s,t,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";return r.a.createElement("div",{className:n},r.a.createElement(l.a,Object.assign({placeholder:e,name:a,validate:s,component:t},o)),i)}},235:function(e,a,s){e.exports={formControl:"FormsControls_formControl__qznE0",error:"FormsControls_error__12xW8",messageError:"FormsControls_messageError__2MdfD",formSummaryError:"FormsControls_formSummaryError__3eMoq"}},237:function(e,a,s){"use strict";s.d(a,"a",(function(){return t}));var t=function(e){if(!e)return"field is required"}},241:function(e,a,s){e.exports={dialogs:"Dialogs_dialogs__1wqCN",messageToSelectDialog:"Dialogs_messageToSelectDialog__1eed-",dialogsItems:"Dialogs_dialogsItems__KQfTT",dialog:"Dialogs_dialog__3hKH2",dialogItem:"Dialogs_dialogItem__3mA13",active:"Dialogs_active__mJiFu",messages:"Dialogs_messages__1qvhp",newMessagesCount:"Dialogs_newMessagesCount__29kXF",buttonPrevMes:"Dialogs_buttonPrevMes__1qjJd",text:"Dialogs_text__3Teea index_commonTextarea__hGuhA",test:"Dialogs_test__2hiSJ"}},259:function(e,a,s){e.exports={message:"Message_message__HRh8y",senderName:"Message_senderName__2jTwM",buttons:"Message_buttons__33x_U",deletedMessage:"Message_deletedMessage__2zYWv",wrapper:"Message_wrapper__6jx1v",fromUser:"Message_fromUser__23vno",fromInterlocutor:"Message_fromInterlocutor__2Z6qU",notVuived:"Message_notVuived__1d9N9"}},260:function(e,a,s){e.exports=s.p+"static/media/userWithoutPhoto.9bd7cc8a.jpg"},329:function(e,a,s){"use strict";s.r(a);var t=s(19),n=s(20),r=s(22),o=s(21),i=s(48),l=s(0),c=s.n(l),u=s(241),d=s.n(u),m=s(26),g=s(259),_=s.n(g),f=s(53),p=s.n(f),M=function(e){var a,s=!!e.deletedMessages.find((function(a){return a.id===e.oneMessage.id}));return c.a.createElement("div",{className:p()(_.a.wrapper,Object(m.a)({},_.a.notVuived,!e.oneMessage.viewed))},c.a.createElement("div",{className:p()(_.a.message,(a={},Object(m.a)(a,_.a.fromUser,e.ownerId===e.oneMessage.senderId),Object(m.a)(a,_.a.fromInterlocutor,e.ownerId!==e.oneMessage.senderId),Object(m.a)(a,_.a.deletedMessage,s),a))},c.a.createElement("div",{className:_.a.senderName},e.oneMessage.senderName,": "),s?"message is deleted":e.oneMessage.body,c.a.createElement("div",{className:_.a.buttons},c.a.createElement("span",{onClick:s?function(){e.restoreMessage(e.oneMessage.id)}:function(){e.deleteMessageForOwner(e.oneMessage.id)}},s?"restore":"delete for me")," | ",c.a.createElement("span",{onClick:function(){e.addMessageToSpam(e.oneMessage.id)}},"spam"))))},v=s(32),E=s(260),h=s.n(E),b=function(e){var a="/dialogs/"+e.user.id;return void 0!==e.user.id?c.a.createElement("div",{className:d.a.dialogItem},c.a.createElement(v.b,{to:a,activeClassName:d.a.active,className:d.a.dialog},c.a.createElement("div",null,c.a.createElement("img",{src:e.user.photos.small?e.user.photos.small:h.a,alt:"ave"})),c.a.createElement("div",null,e.user.userName),e.user.hasNewMessages&&c.a.createElement("div",{className:d.a.newMessagesCount},e.user.newMessagesCount))):c.a.createElement("div",{className:d.a.dialogItem},"not found")},w=s(49),D=s(8),N=s(118),I=s(234),j=s(237),O=Object(N.a)({form:"dialogAddMessageForm"})((function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit,style:{width:"100%"}},Object(I.c)("\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435","newMessageBody",[j.a],I.b,d.a.test,{},""),c.a.createElement("div",null,c.a.createElement(w.b,{name:"SEND"})))})),C=function(e){var a=e.dialogsPage,s=a.dialogs.map((function(e){return c.a.createElement(b,{key:e.id,user:e})})),t=a.messages.map((function(s){return c.a.createElement(M,{addMessageToSpam:e.addMessageToSpam,restoreMessage:e.restoreMessage,deletedMessages:a.deletedMessages,deleteMessageForOwner:e.deleteMessageForOwner,ownerId:e.ownerId,key:s.id,oneMessage:s})})),n=function(){return c.a.createElement("div",{className:d.a.containerMessages},c.a.createElement("div",{className:d.a.buttonPrevMes},c.a.createElement(w.c,{isVisible:e.currentDialogMessagesCount>a.messages.length,name:"show prev messages"})),t)};return c.a.createElement("div",{className:d.a.dialogs},c.a.createElement("div",{className:d.a.dialogsItems},s),c.a.createElement("div",{className:d.a.messages},null===a.selectedDialogId&&c.a.createElement("div",{className:d.a.messageToSelectDialog},"Please select dialog"),null!==a.selectedDialogId&&c.a.createElement(D.b,{path:"/dialogs/".concat(a.selectedDialogId),render:function(){return c.a.createElement(n,null)}})),null!==a.selectedDialogId&&c.a.createElement(O,{onSubmit:function(a){a.newMessageBody&&e.sendMessage(e.userId,a.newMessageBody)}}))},y=s(24),S=s(236),T=function(e){return{isAuth:e.auth.isAuth}};var x=s(14),k=function(e){Object(r.a)(s,e);var a=Object(o.a)(s);function s(){return Object(t.a)(this,s),a.apply(this,arguments)}return Object(n.a)(s,[{key:"componentDidMount",value:function(){this.props.init(this.props.userId)}},{key:"componentDidUpdate",value:function(e,a){e.userId!=this.props.userId&&this.props.updateDialog(this.props.userId)}},{key:"componentWillUnmount",value:function(){this.props.setCurrentDialog(null)}},{key:"render",value:function(){return c.a.createElement(C,this.props)}}]),s}(c.a.Component),F={init:i.g,updateDialog:i.j,sendMessage:i.i,getMessagesNewerThenLast:i.e,setCurrentDialog:i.d.setCurrentDialog,deleteMessageForOwner:i.c,restoreMessage:i.h,addMessageToSpam:i.a};a.default=Object(x.d)(Object(y.b)((function(e){return{dialogsPage:e.dialogsPage,ownerId:e.auth.userId,currentDialogMessagesCount:e.dialogsPage.currentDialogMessagesCount}}),F),(function(e){return Object(y.b)(T)((function(a){if(!a.isAuth)return c.a.createElement(D.a,{to:"/login"});a.isAuth;var s=Object(S.a)(a,["isAuth"]);return c.a.createElement(e,s)}))}))(k)}}]);
//# sourceMappingURL=5.8b67f02c.chunk.js.map